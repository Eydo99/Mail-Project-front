<div class="settings">
  
  <!-- HEADER -->
  <div class="page-header">
    <h1>Settings</h1>
    <p class="subtitle">Manage your personal information and application preferences.</p>
  </div>
  
  <!-- COMMAND BAR -->
  <div class="command-bar">
    <div class="command-actions">
      
      <!-- UNDO -->
      <button 
        [disabled]="!commandManager.canUndo()" 
        (click)="undo()"
        class="icon-btn"
        title="Undo">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 7v6h6"></path>
          <path d="M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"></path>
        </svg>
      </button>
      
      <!-- REDO -->
      <button 
        [disabled]="!commandManager.canRedo()" 
        (click)="redo()"
        class="icon-btn"
        title="Redo">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 7v6h-6"></path>
          <path d="M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7"></path>
        </svg>
      </button>
      
      <!-- HISTORY -->
      <button 
        (click)="toggleHistory()"
        class="icon-btn"
        [class.active]="showHistory"
        title="History">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
      </button>
      
    </div>
    
    <!-- SAVE/DISCARD -->
    <div class="save-actions">
      <button 
        [disabled]="!commandManager.hasChanges()"
        (click)="discardAll()"
        class="btn-discard">
        Discard
      </button>
      
      <button 
        [disabled]="!commandManager.hasChanges() || isSaving"
        (click)="saveAll()"
        class="btn-save">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"></path>
          <polyline points="17 21 17 13 7 13 7 21"></polyline>
          <polyline points="7 3 7 8 15 8"></polyline>
        </svg>
        Save
      </button>
    </div>
  </div>
  
  <!-- PROFILE INFORMATION CARD -->
  <div class="card">
    <div class="card-header">
      <div>
        <h2>Profile Information</h2>
        <p class="card-subtitle">Update your photo and personal details.</p>
      </div>
    </div>
    
    <div class="card-body">
      
      <!-- AVATAR -->
      <div class="avatar-section">
        <img [src]="profilePhoto" alt="Profile" class="avatar">
        <div class="avatar-actions">
          <label class="change-avatar-btn">
            Change Avatar
            <input 
              type="file" 
              accept="image/jpeg,image/gif,image/png" 
              (change)="onPhotoSelect($event)"
              style="display: none">
          </label>
          <p class="avatar-hint">JPG, GIF or PNG. 1MB Max.</p>
        </div>
      </div>
      
      <!-- FORM -->
      <form [formGroup]="profileForm" class="profile-form">
        
        <div class="form-row">
          <div class="form-group">
            <label for="fullName">Full Name</label>
            <input 
              id="fullName"
              type="text" 
              formControlName="fullName"
              (blur)="onFieldChange('fullName')"
              placeholder="Alex Morgan"
              class="form-control">
          </div>
          
          <div class="form-group">
            <label for="email">Email Address</label>
            <input 
              id="email"
              type="email" 
              formControlName="email"
              class="form-control"
              readonly>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="jobTitle">Job Title</label>
            <input 
              id="jobTitle"
              type="text" 
              formControlName="jobTitle"
              (blur)="onFieldChange('jobTitle')"
              placeholder="Senior Product Designer"
              class="form-control">
          </div>
          
          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input 
              id="phone"
              type="tel" 
              formControlName="phone"
              (blur)="onFieldChange('phone')"
              placeholder="+1 (555) 012-3456"
              class="form-control">
          </div>
        </div>
        
        <div class="form-group">
          <label for="bio">Bio</label>
          <textarea 
            id="bio"
            formControlName="bio"
            (blur)="onFieldChange('bio')"
            placeholder="Passionate about building accessible and user-friendly interfaces."
            rows="4"
            maxlength="500"
            class="form-control"></textarea>
        </div>
        
      </form>
    </div>
  </div>
  
  <!-- LOGOUT CARD -->
  <div class="card logout-card">
    <div class="card-body logout-body">
      <div>
        <h2 class="logout-title">Log Out</h2>
        <p class="logout-text">End your current session on this device.</p>
      </div>
      <button (click)="logout()" class="btn-logout">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        Log Out
      </button>
    </div>
  </div>
  
</div>